<!-- Outer shell: fixed left, full height, animated width -->
<aside
  class="fixed top-0 left-0 z-40 h-full border-r border-slate-150 bg-blue-50 dark:border-navy-700 dark:bg-navy-800 transform-gpu transition-[width] duration-300 ease-in md:z-[60]"
  [class.w-16]="collapsed" [class.w-64]="!collapsed" role="navigation" aria-label="Primary">
  <div class="flex h-full w-full flex-col">
    <!-- Header: logo + toggle -->
    <div class="flex items-center justify-between px-3 pt-4">
      <a routerLink="/" class="flex items-center gap-2">
        <img class="h-11 w-11 transition-transform duration-500 ease-in-out hover:rotate-[360deg]"
          src="assets/images/app-logo.png" alt="App logo" />
        <!-- Hide brand text when collapsed -->
        <span class="text-sm font-semibold text-slate-700 dark:text-navy-100 transition-opacity duration-200"
          [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed">
          PM Tool
        </span>
      </a>

      <div class="flex items-center">
        <!-- some content -->
        <button type="button"
          class="inline-flex h-9 w-9 items-center justify-center rounded-full bg-blue-300 ml-auto hover:text-white hover:bg-blue-400 dark:hover:bg-navy-700"
          (click)="toggle()" [attr.aria-expanded]="!collapsed" [attr.aria-label]="ariaLabel" [title]="ariaLabel">
          <lucide-icon [name]="collapsed ? 'chevron-right' : 'chevron-left'" class="h-6 w-6"></lucide-icon>
        </button>
      </div>
      
    </div>

    <!-- Main nav -->
    <nav class="is-scrollbar-hidden flex grow flex-col gap-1 overflow-y-auto px-2 pt-6">
      <!-- Reusable item: icon always, label only when expanded -->
      <a routerLink="/" routerLinkActive="text-primary dark:bg-navy-600 bg-primary/10 dark:text-accent-light"
        [routerLinkActiveOptions]="{ exact: true }"
        class="group flex h-11 items-center rounded-lg px-2 outline-none transition-colors duration-200 hover:bg-blue-100 focus:bg-primary/20 active:bg-primary/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
        [class.justify-center]="collapsed" [title]="collapsed ? 'Home' : null">
        <lucide-icon name="home" class="h-8 w-8"></lucide-icon>
        @if(!collapsed){
          <span class="ml-3 text-sm text-slate-700 dark:text-navy-100 transition-[opacity,margin] duration-200"
            [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed" [class.ml-0]="collapsed">Home</span>
        }
      </a>

      <a [routerLink]="['/tasks']" [queryParams]="{ project_id: projectId }"
        routerLinkActive="text-primary dark:bg-navy-600 bg-primary/10 dark:text-accent-light"
        class="group flex h-11 items-center rounded-lg px-2 outline-none transition-colors duration-200 hover:bg-blue-100 focus:bg-primary/20 active:bg-primary/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
        [class.justify-center]="collapsed" [title]="collapsed ? 'Tasks' : null">
        <lucide-icon name="clipboard-list" class="h-8 w-8"></lucide-icon>
        @if(!collapsed){
        <span class="ml-3 text-sm text-slate-700 dark:text-navy-100 transition-[opacity,margin] duration-200"
          [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed" [class.ml-0]="collapsed">Tasks</span>
        }
      </a>

      <a routerLink="/kanban" routerLinkActive="text-primary dark:bg-navy-600 bg-primary/10 dark:text-accent-light"
        class="group flex h-11 items-center rounded-lg px-2 outline-none transition-colors duration-200 hover:bg-blue-100 focus:bg-primary/20 active:bg-primary/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
        [class.justify-center]="collapsed" [title]="collapsed ? 'Kanban board' : null">
        <lucide-icon name="square-kanban" class="h-8 w-8"></lucide-icon>
        @if(!collapsed){
          <span class="ml-3 text-sm text-slate-700 dark:text-navy-100 transition-[opacity,margin] duration-200"
            [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed" [class.ml-0]="collapsed">Kanban
            board</span>
        }
      </a>

      <a routerLink="/gantt" routerLinkActive="text-primary dark:bg-navy-600 bg-primary/10 dark:text-accent-light"
        class="group flex h-11 items-center rounded-lg px-2 outline-none transition-colors duration-200 hover:bg-blue-100 focus:bg-primary/20 active:bg-primary/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
        [class.justify-center]="collapsed" [title]="collapsed ? 'Gantt chart' : null">
        <lucide-icon name="chart-gantt" class="h-8 w-8"></lucide-icon>
        @if(!collapsed){
          <span class="ml-3 text-sm text-slate-700 dark:text-navy-100 transition-[opacity,margin] duration-200"
            [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed" [class.ml-0]="collapsed">Gantt
            chart</span>
        }
      </a>

      <a routerLink="/reports-use" routerLinkActive="text-primary dark:bg-navy-600 bg-primary/10 dark:text-accent-light"
        class="group flex h-11 items-center rounded-lg px-2 outline-none transition-colors duration-200 hover:bg-blue-100 focus:bg-primary/20 active:bg-primary/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
        [class.justify-center]="collapsed" [title]="collapsed ? 'Reports' : null">
        <lucide-icon name="chart-pie" class="h-8 w-8"></lucide-icon>
        @if(!collapsed){
          <span class="ml-3 text-sm text-slate-700 dark:text-navy-100 transition-[opacity,margin] duration-200"
            [class.opacity-0]="collapsed" [class.pointer-events-none]="collapsed" [class.ml-0]="collapsed">Reports</span>
        }
      </a>
    </nav>

    <!-- Bottom area (optional) -->
    <div class="px-2 py-3">
      <!-- Add anything you need here (profile, settings, etc.) -->
    </div>
  </div>
</aside>